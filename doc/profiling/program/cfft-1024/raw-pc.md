下面我先给你一份**“基本块 20 的完整数据依赖表（RAW / WAR / WAW）”**，**可直接用于你的阻塞分析**。
我按顺序解析了所有指令，提取每条指令的：写寄存器、读寄存器，并构建跨指令的依赖关系。

你后续要做 profiling（例如倒序扫描找最后 wbROB），这张表就是后续 pattern/stall 统计的基础。

---

# ✅ **基本块 20：数据依赖表（RAW / WAR / WAW）**

下面按 **PC 升序** 列出每条指令的依赖：

---

## ### **格式说明**

* **RAW**：本指令依赖于某条 *之前的写*
* **WAR**：本指令写某寄存器，而之前有指令读它
* **WAW**：本指令写某寄存器，而之前有指令写它（覆盖写）

---

# ✅ **核心寄存器写入点**

为了让你整体有感知，我先列出所有“写寄存器”的指令：

| PC    | 指令       | 写寄存器 |
| ----- | -------- | ---- |
| 0x258 | add a8   | a8   |
| 0x25c | lw a9    | a9   |
| 0x260 | lw a18   | a18  |
| 0x264 | lw a19   | a19  |
| 0x268 | lw a20   | a20  |
| 0x26c | mulh a21 | a21  |
| 0x270 | mul a22  | a22  |
| 0x274 | mulh a23 | a23  |
| 0x278 | mul a24  | a24  |
| 0x27c | sltu a25 | a25  |
| 0x280 | sub a21  | a21  |
| 0x284 | sub a21  | a21  |
| 0x288 | sub a22  | a22  |
| 0x28c | mul a23  | a23  |
| 0x290 | mulh a9  | a9   |
| 0x294 | mul a20  | a20  |
| 0x298 | mulh a18 | a18  |
| 0x29c | add a9   | a9   |
| 0x2a0 | add a20  | a20  |
| 0x2a4 | sltu a18 | a18  |
| 0x2a8 | add a9   | a9   |
| 0x2ac | slli a21 | a21  |
| 0x2b0 | srli a18 | a18  |
| 0x2b4 | or a18   | a18  |
| 0x2b8 | slli a9  | a9   |
| 0x2bc | lw a19   | a19  |
| 0x2c0 | srli a20 | a20  |
| 0x2c4 | lw a21   | a21  |
| 0x2c8 | or a9    | a9   |
| 0x2cc | add a20  | a20  |
| 0x2d0 | sw a20   | —    |
| 0x2d4 | add a20  | a20  |
| 0x2d8 | sw a20   | —    |
| 0x2dc | sub a18  | a18  |
| 0x2e0 | sw a18   | —    |
| 0x2e4 | sub a9   | a9   |
| 0x2e8 | sw a9    | —    |
| 0x2ec | add a31  | a31  |
| 0x2f0 | addi a30 | a30  |
| 0x2f4 | bne      | —    |

---

# 🧩 **下面是完整 RAW 依赖表（最重要）**

我按 **每条指令：它依赖到谁** 列出（只列 RAW，WAR/WAW 你若需要我再补）：

---

## 下方是数据量较大，但**对你的 profiling 绝对必要的“RAW 依赖表”**：

---

### **0x80000258 add a8 ← a30, a7**

* RAW:

  * a30 ← **0x250** （若0x250出现在两条之前）
  * a7  ← **0x23c**  （若0x23c出现在7条之前）

---

### **0x8000025c lw a9, -4(a8)**

* RAW: **a8 ← 0x258**

---

### **0x80000260 lw a18, -4(a31)**

* a31 ← **0x2ec** （若0x2ec出现在10条之内）

---

### **0x80000264 lw a19, 0(a8)**

* RAW: **a8 ← 0x258**

---

### **0x80000268 lw a20, 0(a31)**

* a31 ← **0x2ec** （若0x2ec出现在10条之内）

---

### **0x8000026c mulh a21 ← a18, a9**

* RAW:

  * a18 ← **0x260**
  * a9  ← **0x25c**

---

### **0x80000270 mul a22 ← a18, a9**

* RAW:

  * a18 ← **0x260**
  * a9  ← **0x25c**

---

### **0x80000274 mulh a23 ← a20, a19**

* RAW:

  * a20 ← **0x268**
  * a19 ← **0x264**

---

### **0x80000278 mul a24 ← a20, a19**

* RAW:

  * a20 ← **0x268**
  * a19 ← **0x264**

---

### **0x8000027c sltu a25 ← a22, a24**

* RAW:

  * a22 ← **0x270**
  * a24 ← **0x278**

---

### **0x80000280 sub a21 ← a21, a23**

* RAW:

  * a21 ← **0x26c**
  * a23 ← **0x274**

---

### **0x80000284 sub a21 ← a21, a25**

* RAW:

  * a21 ← **0x280**
  * a25 ← **0x27c**

---

### **0x80000288 sub a22 ← a22, a24**

* RAW:

  * a22 ← **0x270**
  * a24 ← **0x278**

---

### **0x8000028c mul a23 ← a20, a9**

* RAW:

  * a20 ← **0x268**
  * a9  ← **0x25c**

---

### **0x80000290 mulh a9 ← a20, a9**

* RAW:

  * a20 ← **0x268**
  * a9  ← **0x25c**

---

### **0x80000294 mul a20 ← a18, a19**

* RAW:

  * a18 ← **0x260**
  * a19 ← **0x264**

---

### **0x80000298 mulh a18 ← a18, a19**

* RAW:

  * a18 ← **0x260**
  * a19 ← **0x264**

---

### **0x8000029c add a9 ← a9, a18**

* RAW:

  * a9  ← **0x290**
  * a18 ← **0x298**

---

### **0x800002a0 add a20 ← a23, a20**

* RAW:

  * a23 ← **0x28c**
  * a20 ← **0x294**

---

### **0x800002a4 sltu a18 ← a20, a23**

* RAW:

  * a20 ← **0x294**
  * a23 ← **0x28c**

---

### **0x800002a8 add a9 ← a9, a18**

* RAW:

  * a9 ← **0x29c**
  * a18 ← **0x2a4**

---

### **0x800002ac slli a21 ← a21**

* RAW:

  * a21 ← **0x284**

---

### **0x800002b0 srli a18 ← a22**

* RAW:

  * a22 ← **0x288**

---

### **0x800002b4 or a18 ← a18, a21**

* RAW:

  * a18 ← **0x2b0**
  * a21 ← **0x2ac**

---

### **0x800002b8 slli a9 ← a9**

* RAW:

  * a9 ← **0x2a8**

---

### **0x800002bc lw a19, -4(a30)**

* RAW:

  * a30（外部 / 0x2f0 更新，但发生在后面）

---

### **0x800002c0 srli a20 ← a20**

* RAW:

  * a20 ← **0x2a0**

---

### **0x800002c4 lw a21, 0(a30)**

* RAW: 依赖 a30（外部）

---

### **0x800002c8 or a9 ← a20, a9**

* RAW:

  * a20 ← **0x2c0**
  * a9  ← **0x2b8**

---

### **0x800002cc add a20 ← a19, a18**

* RAW:

  * a19 ← **0x2bc**
  * a18 ← **0x2b4**

---

### **0x800002d0 sw a20**

* RAW:

  * a20 ← **0x2cc**

---

### **0x800002d4 add a20 ← a21, a9**

* RAW:

  * a21 ← **0x2c4**
  * a9  ← **0x2c8**

---

### **0x800002d8 sw a20**

* RAW:

  * a20 ← **0x2d4**

---

### **0x800002dc sub a18 ← a19, a18**

* RAW:

  * a19 ← **0x2bc**
  * a18 ← **0x2b4**

---

### **0x800002e0 sw a18**

* RAW:

  * a18 ← **0x2dc**

---

### **0x800002e4 sub a9 ← a21, a9**

* RAW:

  * a21 ← **0x2c4**
  * a9  ← **0x2c8**

---

### **0x800002e8 sw a9**

* RAW:

  * a9 ← **0x2e4**

---

### **0x800002ec add a31 ← a31, a5**

* RAW:

  * a31（外部）
  * a5（外部）

---

### **0x800002f0 addi a30 ← a30**

* RAW:

  * a30（外部）

---

### **0x800002f4 bne a31, a28**

* RAW:

  * a31 ← **0x2ec**
  * a28（外部）


补充：


* **0x80000300 (bltu a17, a15, -176)**

  * RAW: a17 ← **0x800002f8**
  * RAW: a15 ← 外部

* **0x80000250 (addi a30, a29, 0)**

  * RAW: a29 ← **0x800002fc**（若控制流顺序 BB21→BB19/或同迭代走向满足的话；按寄存器使用这是最直接的 producer）
  * WAW: a30 〈— 如果在 BB20（0x2f0）也写了 a30，则存在 **WAW (0x2f0 ↔ 0x00250)**（见下面跨块部分）

* **0x80000254 (addi a31, a14, 0)**

  * RAW: a14 ← external
  * WAW: a31 〈— BB20 中 **0x800002ec (add a31, a31, a5)** 也写 a31，存在 **WAW (0x2ec ↔ 0x254)**（见下面跨块部分）

---



---

# ✅ 你接下来可以做的 profiling 方式

你刚才说：

> 倒着扫描每次迭代，从最后一条 wbROB 指令开始找依赖链。

你的方向完全对。
我已经把所有 RAW 链路完全展开，你直接就能：

* 找 producer-consumer
* 统计 load-use delay
* 找 mul/mulh 链条的 accumulative stall
* 找跨迭代依赖（a30/a31）

---

# 📌 如需：

* 输出 WAR / WAW
* 输出“阻塞原因统计脚本”
* 结合 cycle 字段自动算每条指令的真实 stall
* 自动识别 pattern（例如 load→mul 链）

你一句话，我马上继续做。
